
> todo-app@0.1.0 test
> vitest tests/integration/repositories/ --run --no-file-parallelism


[1m[46m RUN [49m[22m [36mv4.0.14 [39m[90mC:/Users/adgjm/Desktop/develop/memo-app[39m

[90mstdout[2m | tests/integration/repositories/notes.repository.test.ts
[22m[39m🔧 Test environment setup...

[90mstdout[2m | tests/integration/repositories/notes.repository.test.ts
[22m[39m✅ Test environment ready

[90mstdout[2m | tests/integration/repositories/notes.repository.test.ts
[22m[39m🧹 Cleaning up test environment...

[90mstdout[2m | tests/integration/repositories/notes.repository.test.ts
[22m[39m✅ Test environment cleaned

 [32m✓[39m tests/integration/repositories/notes.repository.test.ts [2m([22m[2m28 tests[22m[2m)[22m[33m 97343[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 基本的なノートを作成できる [33m 3392[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: プロジェクトに紐づくノートを作成できる [33m 2659[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 親ノートを指定してサブノートを作成できる [33m 2762[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 暗号化フラグ付きノートを作成できる [33m 3794[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: metadataを含むノートを作成できる [33m 3417[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: IDでノートを取得できる [33m 2798[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: includeオプションでプロジェクトを含めて取得できる [33m 2788[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: includeオプションで子ノートを含めて取得できる [33m 3420[2mms[22m[39m
       [33m[2m✓[22m[39m 異常系: 存在しないIDはnullを返す [33m 2860[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: オーナーIDで絞り込み検索できる [33m 3928[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: プロジェクトIDで絞り込みできる [33m 4175[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: アーカイブされていないノートのみ取得できる [33m 3732[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 削除されていないノートのみ取得できる [33m 3675[2mms[22m[39m
       [33m[2m✓[22m[39m 境界値: sortIndexでソートできる [33m 4314[2mms[22m[39m
       [33m[2m✓[22m[39m 境界値: take/skipでページングできる [33m 3095[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: ノート情報を更新できる [33m 2506[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: ノートをアーカイブできる [33m 2657[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: ノートをソフト削除できる [33m 2461[2mms[22m[39m
       [33m[2m✓[22m[39m 異常系: 存在しないIDの更新はエラー [33m 2555[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: ノートを物理削除できる [33m 3040[2mms[22m[39m
       [33m[2m✓[22m[39m 異常系: 存在しないIDの削除はエラー [33m 3566[2mms[22m[39m
       [33m[2m✓[22m[39m 権限: カスケード削除の確認（タスクも削除される） [33m 2833[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 条件なしでカウントできる [33m 3194[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: アーカイブ状態でカウントできる [33m 3007[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 削除状態でカウントできる [33m 2825[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 親ノート削除時に子ノートのparentIdがNULLになる（SetNull） [33m 3117[2mms[22m[39m
       [33m[2m✓[22m[39m トランザクション内でノートとタグを紐付けできる [33m 4155[2mms[22m[39m
       [33m[2m✓[22m[39m トランザクションエラー時はロールバックされる [33m 5095[2mms[22m[39m
[90mstdout[2m | tests/integration/repositories/note-tags.repository.test.ts
[22m[39m🔧 Test environment setup...

[90mstdout[2m | tests/integration/repositories/note-tags.repository.test.ts
[22m[39m✅ Test environment ready

[90mstdout[2m | tests/integration/repositories/note-tags.repository.test.ts
[22m[39m🧹 Cleaning up test environment...

[90mstdout[2m | tests/integration/repositories/note-tags.repository.test.ts
[22m[39m✅ Test environment cleaned

 [32m✓[39m tests/integration/repositories/note-tags.repository.test.ts [2m([22m[2m22 tests[22m[2m)[22m[33m 99138[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: ノートにタグを追加できる [33m 3358[2mms[22m[39m
       [33m[2m✓[22m[39m 異常系: 重複した関連は作成できない [33m 3473[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 複数タグを一括追加できる [33m 3908[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: skipDuplicatesで重複をスキップできる [33m 3575[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: ノートIDとタグIDで関連を取得できる [33m 2935[2mms[22m[39m
       [33m[2m✓[22m[39m 異常系: 存在しない関連はnullを返す [33m 3533[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: ノートIDで全ての関連タグを取得できる [33m 3935[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: タグがないノートは空配列を返す [33m 2805[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: タグIDで全ての関連ノートを取得できる [33m 5757[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 使用されていないタグは空配列を返す [33m 4139[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: ノートからタグを削除できる [33m 4247[2mms[22m[39m
       [33m[2m✓[22m[39m 異常系: 存在しない関連の削除はエラー [33m 5345[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: ノートから全タグを削除できる [33m 5537[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: タグがないノートは0件削除 [33m 4011[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: タグに紐づく全関連を削除できる [33m 7192[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 使用されていないタグは0件削除 [33m 4413[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: ノートに紐づくタグ数をカウントできる [33m 5432[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: タグがないノートは0を返す [33m 3750[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: タグが使用されているノート数をカウントできる [33m 4326[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 使用されていないタグは0を返す [33m 3400[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: トランザクション内で複数タグを操作できる [33m 4546[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: トランザクションエラー時はロールバックされる [33m 4686[2mms[22m[39m
[90mstdout[2m | tests/integration/repositories/events.repository.test.ts
[22m[39m🔧 Test environment setup...

[90mstdout[2m | tests/integration/repositories/events.repository.test.ts
[22m[39m✅ Test environment ready

[90mstdout[2m | tests/integration/repositories/events.repository.test.ts
[22m[39m🧹 Cleaning up test environment...

[90mstdout[2m | tests/integration/repositories/events.repository.test.ts
[22m[39m✅ Test environment cleaned

 [32m✓[39m tests/integration/repositories/events.repository.test.ts [2m([22m[2m22 tests[22m[2m)[22m[33m 88889[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 基本的なイベントを作成できる [33m 3202[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 終日イベントを作成できる [33m 3120[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 繰り返しイベントを作成できる [33m 4507[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: metadataを含むイベントを作成できる [33m 3646[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: IDでイベントを取得できる [33m 4016[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: includeオプションでノートを含めて取得できる [33m 4107[2mms[22m[39m
       [33m[2m✓[22m[39m 異常系: 存在しないIDはnullを返す [33m 3104[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: ノートIDでイベントを取得できる [33m 3179[2mms[22m[39m
       [33m[2m✓[22m[39m 異常系: 存在しないnoteIdはnullを返す [33m 2894[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 日付範囲で絞り込みできる [33m 4621[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 終日イベントのみ取得できる [33m 3918[2mms[22m[39m
       [33m[2m✓[22m[39m 境界値: take/skipでページングできる [33m 5161[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: イベント情報を更新できる [33m 3396[2mms[22m[39m
       [33m[2m✓[22m[39m 異常系: 存在しないIDの更新はエラー [33m 3224[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: ノートIDでイベントを更新できる [33m 3046[2mms[22m[39m
       [33m[2m✓[22m[39m 異常系: 存在しないnoteIdの更新はエラー [33m 3295[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: イベントを削除できる [33m 3187[2mms[22m[39m
       [33m[2m✓[22m[39m 異常系: 存在しないIDの削除はエラー [33m 3452[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: ノートIDでイベントを削除できる [33m 4722[2mms[22m[39m
       [33m[2m✓[22m[39m 異常系: 存在しないnoteIdの削除はエラー [33m 3084[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 条件なしでカウントできる [33m 5325[2mms[22m[39m
       [33m[2m✓[22m[39m 正常系: 終日イベントでカウントできる [33m 5266[2mms[22m[39m
[90mstdout[2m | tests/integration/repositories/attachments.repository.test.ts
[22m[39m🔧 Test environment setup...

[90mstdout[2m | tests/integration/repositories/attachments.repository.test.ts
[22m[39m✅ Test environment ready

