# メモベース Todo アプリ — 機能優先度（Tier）一覧

この文書は「高度なメモ帳をベースに、必要な範囲で Todo 機能を付加する」という前提で機能優先度を整理したものです。
目的は「手軽にメモを残せて視覚的に整理しやすく、必要なときに Todo として扱える」体験を最小コストで成立させることです。

各項目に短い受け入れ基準（Acceptance Criteria）を示します。

---

## Tier 1 — 必須（MVP：まず公開する）

優先度が最も高い機能群。ここが備われば「メモを安心して書き溜め、必要に応じて Todo として扱う」最低限の体験が成立します。

- 基本 CRUD（メモ/Todo の作成・一覧・更新・削除［ソフト削除含む］）
  - AC: メモを素早く追加・編集でき、Todo として完了・アーカイブ・復元が可能。
- Markdown 表示（見た目優先のメモ閲覧）
  - AC: `bodyMarkdown` を保存し、改行・インデント・箇条書き・コードブロック等が視覚的に分かりやすくレンダリングされる（クライアントで安全に表示）。
  - 備考: 編集 UI はプレーンテキスト＋即時プレビュー程度で十分。
- タグ（候補提示・複数タグ）とタグ単位の UI グルーピング
  - AC: よく使うタグ候補が提示され、タグごとにメモがまとまって表示される。タグフィルタで絞り込みができる。
  - 備考: 自動タグ付けは後続（Tier2+）。
- 単一ユーザー認証（あなた専用のメモ帳）
  - AC: 起動時に認証を要求し、正しい認証情報を持つあなただけがアクセスできる。セッションは安全に維持される。
- 基本検索とタグフィルタ
  - AC: タイトル/本文の部分一致検索とタグベースのフィルタが機能し、必要なメモに即座にたどり着ける。
- 添付（画像等）の最小サポート（メタ保存＋順序調整）
  - AC: 外部ストレージ URL とメタデータを保存し、メモ内で画像の表示位置をリスト順で調整できる（上下入れ替え）。
- UX/操作性重視（少ない操作ステップ）
  - AC: 削除は即時破棄ではなくアーカイブ/ゴミ箱経由で復元可能。主要操作は 1〜2 ステップで完了する。

---

## Tier 2 — 高（MVP 直後に追加・改善する）

MVP 公開直後に追加するとメモ整理と Todo 運用がさらに快適になる機能群です。

- タグ候補の学習・自動提案、自動タグ付け（AI 補助）
  - AC: 過去の利用やタイトル/本文から候補を提案し、自動タグ付けの試験的機能を提供。
- プロジェクト（必要に応じて有効化）
  - AC: 必要なときだけプロジェクトを作成し、複数メモを束ねられる（最小: name, optional color, optional description）。
- 期限（dueAt）・リマインダー（remindAt）・優先度（priority）
  - AC: メモを Todo として扱う際に期日やリマインドを付与し、一覧でソート/フィルタできる。
- 添付のドラッグ配置とリッチプレビュー
  - AC: メモ内で画像やファイルをドラッグして任意位置に配置し、サムネイルやプレビューを即座に確認できる。
- サブタスク（親子関係）／ツリー構造（プロジェクトと連動）
  - AC: 親メモと子メモ（サブタスク）を紐付け、シンプルなツリー表示で全体像を把握できる。
- セキュリティ強化（セッション管理、強制ローテーション等）
  - AC: 認証周りを強化し、長期運用に耐える安全性を確保する。

---

## Tier 3 — 低（将来的または条件付きで導入）

利用量やセキュリティ基準、運用体制が整った段階で導入を検討します。

- 高速全文検索（Postgres tsvector + GIN）
  - AC: 大量メモでもストレスなく全文検索できる。
- パスワード管理機能（アプリ内保管・暗号化）
  - AC: 暗号化・アクセス制御を満たした上で、安全にパスワードを保存・参照できる。
- 繰り返しタスク（recurrenceRule）や高度な通知（メール/プッシュ）
  - AC: 定期的に発生する Todo を設定し、通知が行える。
- 高度な添付処理（変換/プレビュー/動画等）
  - AC: 大容量ファイルや動画のサムネイル生成、メディア変換が自動化される。
- クリップボード取り込み（ワンボタン追加）
  - AC: クリップボードのテキスト/画像を 1 ボタンでメモ/Todo として即時追加できる（貼り付け確認のダイアログ程度）。

---

## 実装指針（メモ優先の開発方針）

- 初期は「書き心地」と「あなた専用の安全なメモ空間」を最優先にし、Todo 的な機能は負担にならない範囲で提供する。
- DB 設計は Tag/Attachment/メモ本文の拡張余地を確保しつつ、構造はシンプルに保つ。
- UI はメモ一覧＝情報アーカイブとして読みやすく、必要タスクをすぐに抜き出せる設計を目指す。
- 認証は初期から厳格に導入する（Tier1）。将来的な拡張に備えて `User` や `ownerId` をスキーマに保持しておく。

---
